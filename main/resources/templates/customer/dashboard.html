<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang ch·ªß - Kh√°ch h√†ng</title>
    <link rel="stylesheet" href="/css/style.css">
    <style>
        .welcome-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 12px;
            margin-bottom: 32px;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        .stat-card {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
        }
        .stat-card .icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
        .stat-card .number {
            font-size: 32px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 8px;
        }
        .stat-card .label {
            color: #64748b;
            font-size: 14px;
        }
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }
        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 24px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            text-decoration: none;
            color: #1e293b;
            transition: all 0.3s;
        }
        .action-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);
        }
        .action-btn .icon {
            font-size: 40px;
            margin-bottom: 12px;
        }
        .recent-section {
            background: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="welcome-section">
            <h1>Xin ch√†o, <span th:text="${khachHang.hoTen}">Kh√°ch h√†ng</span>!</h1>
            <p>Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi h·ªá th·ªëng qu·∫£n l√Ω b·∫£o h√†nh</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="icon">üì±</div>
                <div class="number" th:text="${soThietBi}">0</div>
                <div class="label">Thi·∫øt b·ªã</div>
            </div>
            <div class="stat-card">
                <div class="icon">üîß</div>
                <div class="number" th:text="${soPhieuSua}">0</div>
                <div class="label">Phi·∫øu s·ª≠a ch·ªØa</div>
            </div>
        </div>

        <h2 style="margin-bottom: 16px;">Thao t√°c nhanh</h2>
        <div class="quick-actions">
            <a href="/customer/lich-su-bao-hanh" class="action-btn">
                <div class="icon">üìã</div>
                <div>Xem l·ªãch s·ª≠ b·∫£o h√†nh</div>
            </a>
            <a href="/customer/tra-cuu-sua-chua" class="action-btn">
                <div class="icon">üîç</div>
                <div>Tra c·ª©u t√¨nh tr·∫°ng s·ª≠a ch·ªØa</div>
            </a>
            <a href="/customer/thong-tin-tai-khoan" class="action-btn">
                <div class="icon">üë§</div>
                <div>C·∫≠p nh·∫≠t th√¥ng tin t√†i kho·∫£n</div>
            </a>
            <a href="/customer/khieu-nai" class="action-btn">
                <div class="icon">üìù</div>
                <div>G·ª≠i y√™u c·∫ßu/khi·∫øu n·∫°i</div>
            </a>
            <a href="/customer/doi-mat-khau" class="action-btn">
                <div class="icon">üîí</div>
                <div>ƒê·ªïi m·∫≠t kh·∫©u</div>
            </a>
            <a href="/logout" class="action-btn" style="border-color: #ef4444;">
                <div class="icon">üö™</div>
                <div>ƒêƒÉng xu·∫•t</div>
            </a>
        </div>

        <div class="recent-section">
            <h2 style="margin-bottom: 16px;">Phi·∫øu s·ª≠a ch·ªØa g·∫ßn ƒë√¢y</h2>
            
            <div th:if="${danhSachPhieu.isEmpty()}" style="text-align: center; padding: 40px 0; color: #64748b;">
                <div style="font-size: 48px; margin-bottom: 16px;">üì≠</div>
                <p>Ch∆∞a c√≥ phi·∫øu s·ª≠a ch·ªØa n√†o</p>
            </div>

            <table th:if="${!danhSachPhieu.isEmpty()}">
                <thead>
                    <tr>
                        <th>M√£ phi·∫øu</th>
                        <th>Thi·∫øt b·ªã</th>
                        <th>Ng√†y ti·∫øp nh·∫≠n</th>
                        <th>Tr·∫°ng th√°i</th>
                        <th>Chi ph√≠</th>
                        <th>H√†nh ƒë·ªông</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="phieu, iterStat : ${danhSachPhieu}" th:if="${iterStat.index < 5}">
                        <td><strong th:text="${phieu.maPhieu}"></strong></td>
                        <td th:text="${phieu.thietBi.hangSanXuat + ' ' + phieu.thietBi.model}"></td>
                        <td th:text="${#temporals.format(phieu.ngayTiepNhan, 'dd-MM-yyyy HH:mm')}"></td>
                        <td>
                            <span class="badge" 
                                  th:classappend="${phieu.trangThai == 'ƒê√£ tr·∫£ kh√°ch'} ? 'badge-success' : 
                                                  (${phieu.trangThai == 'ƒêang s·ª≠a ch·ªØa'} ? 'badge-warning' : 
                                                  (${phieu.trangThai == 'ƒê√£ s·ª≠a xong'} ? 'badge-info' : 'badge-danger'))"
                                  th:text="${phieu.trangThai}">
                            </span>
                        </td>
                        <td>
                            <span th:if="${phieu.tongChiPhi != null}" 
                                  th:text="${#numbers.formatDecimal(phieu.tongChiPhi, 0, 'COMMA', 0, 'POINT') + ' VNƒê'}">
                            </span>
                            <span th:unless="${phieu.tongChiPhi != null}">Ch∆∞a t√≠nh</span>
                        </td>
                        <td>
                            <a th:href="@{/customer/phieu-sua-chua/{id}(id=${phieu.maPhieu})}" class="link">
                                Xem chi ti·∫øt
                            </a>
                        </td>
                    </tr>
                </tbody>
            </table>

            <div th:if="${!danhSachPhieu.isEmpty() && danhSachPhieu.size() > 5}" style="text-align: center; margin-top: 16px;">
                <a href="/customer/lich-su-bao-hanh" class="btn btn-outline">Xem t·∫•t c·∫£</a>
            </div>
        </div>
    </div>
</body>
</html>